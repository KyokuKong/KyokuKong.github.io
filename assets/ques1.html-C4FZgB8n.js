import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,e as t}from"./app-DLvi4G5T.js";const e={},p=t(`<details class="hint-container details"><summary>Solidity题目</summary><p>使用Solidity语言完成智能合约开发、部署和调用，要求如下： 1.食品信息（FoodInfoItem）的接口编码 （1）编写食品信息实体的接口，完成可溯源食品信息初始化，实现可追溯的原始生产商食品信息上链功能； 表2-2-1 FoodInfoItem实体说明</p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>_currentTraceName</td><td>string</td><td>当前用户名</td></tr><tr><td>_name</td><td>string</td><td>食品名称</td></tr><tr><td>_owner</td><td>address</td><td>合约的创建者</td></tr><tr><td>_quality</td><td>uint8</td><td>质量</td></tr><tr><td>_status</td><td>uint8</td><td>状态</td></tr><tr><td>_traceName</td><td>string[]</td><td>用户名</td></tr><tr><td>_timestamp</td><td>uint[]</td><td>流转时间戳</td></tr><tr><td>_traceAddress</td><td>address[]</td><td>用户地址</td></tr><tr><td>_traceQuality</td><td>uint8[]</td><td>食品质量</td></tr></tbody></table><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">contract</span> <span class="token class-name">FoodInfoItem</span><span class="token punctuation">{</span>
    <span class="token comment">//①保存食品流转过程中各个阶段的时间戳</span>
    <span class="token comment">//②保存食品流转过程各个阶段的用户名</span>
    <span class="token comment">//③保存食品流转过程各个阶段的用户地址信息（和用户一一对应）</span>
    <span class="token comment">//④保存食品流转过程中各个阶段的质量</span>
    <span class="token comment">//⑤食品名称</span>
    <span class="token comment">//⑥当前用户名称</span>
    <span class="token comment">//⑦质量（0=优质 1=合格 2=不合格）</span>
    <span class="token comment">//⑧状态（0:生产 1:分销 2:出售）</span>
    <span class="token comment">//⑨初始化owner</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）编写分销商食品上链信息接口，根据食品溯源智能合约地址获取分销商上链食品的信息；</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">addTraceInfoByDistributor</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">uint8</span> quality<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>_status <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token string">&quot;status must be producing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//②</span>
        _timestamp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _traceName<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>traceName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _currentTraceName <span class="token operator">=</span> traceName<span class="token punctuation">;</span>
        <span class="token comment">//③</span>
        <span class="token comment">//④</span>
        _traceQuality<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_quality<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）编写超市进行食品上链信息的接口，根据食品溯源智能合约地址获取超市上链食品信息。</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">addTraceInfoByRetailer</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">uint8</span> quality<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>_status <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">&quot;status must be distributing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//②</span>
        _timestamp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _traceName<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>traceName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _currentTraceName <span class="token operator">=</span> traceName<span class="token punctuation">;</span>
        <span class="token comment">//③</span>
        <span class="token comment">//④</span>
        _traceQuality<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_quality<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _status <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.食品溯源(Trace)的接口编码 （1）编写食品溯源智能合约生产商Producer添加食品接口，必须生产商才能添加可溯源的食品，实现溯源功能；</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">newFood</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">string</span> traceName<span class="token punctuation">,</span> <span class="token builtin">uint8</span> quality<span class="token punctuation">)</span>
	<span class="token keyword">public</span> ② <span class="token keyword">returns</span><span class="token punctuation">(</span>③<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//④</span>
            <span class="token comment">//⑤</span>
            <span class="token comment">//⑥</span>
            <span class="token comment">//⑦</span>
            <span class="token comment">//⑧</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）编写食品溯源智能合约分销商Distributor添加食品接口，必须分销商才能添加可溯源的食品，实现溯源功能；</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">addTraceInfoByDistributor</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">uint8</span> quality<span class="token punctuation">)</span>
	<span class="token keyword">public</span> ② <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//③</span>
            <span class="token keyword">return</span> <span class="token function">FoodInfoItem</span><span class="token punctuation">(</span>foods<span class="token punctuation">[</span>traceNumber<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>④<span class="token punctuation">,</span> quality<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）编写食品溯源智能合约超市Retailer添加食品接口，必须超市才能添加可溯源的食品，实现溯源功能。</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">addTraceInfoByRetailer</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">uint8</span> quality<span class="token punctuation">)</span>
	<span class="token keyword">public</span> ② <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">require</span><span class="token punctuation">(</span>③<span class="token punctuation">,</span> <span class="token string">&quot;traceNumber does not exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">FoodInfoItem</span><span class="token punctuation">(</span>foods<span class="token punctuation">[</span>traceNumber<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>④<span class="token punctuation">,</span> quality<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.角色（Role）管理的接口编码 （1）编写食品溯源增加角色接口，必须是未增加的角色才能被添加，实现添加角色的功能；</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">address</span> account<span class="token punctuation">)</span> ② <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token operator">!</span>③<span class="token punctuation">,</span> <span class="token string">&quot;Roles: account already has role&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        role<span class="token punctuation">.</span>④ <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）编写食品溯源移除角色接口，必须是已增加的角色才能被移除，实现移除角色的功能；</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">address</span> account<span class="token punctuation">)</span> ② <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>③<span class="token punctuation">,</span> <span class="token string">&quot;Roles: account does not have role&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        role<span class="token punctuation">.</span>④ <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）编写食品溯源角色授权接口，必须是授权的角色地址，实现角色权限管理功能。</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">has</span><span class="token punctuation">(</span>①<span class="token punctuation">,</span> <span class="token builtin">address</span> account<span class="token punctuation">)</span> ② <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>③<span class="token punctuation">,</span> <span class="token string">&quot;Roles: account is the zero address&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> role<span class="token punctuation">.</span>④<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.合约编译、部署和调用 （1）解决代码错误和警告，正确编译并部署合约，成功获取部署的合约地址和abi； （2）调用食品溯源智能合约的接口，完整验证业务流程。</p></details>`,1),o=[p];function c(i,l){return s(),a("div",null,o)}const r=n(e,[["render",c],["__file","ques1.html.vue"]]);export{r as default};
