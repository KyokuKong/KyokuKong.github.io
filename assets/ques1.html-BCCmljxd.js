const n=JSON.parse('{"key":"v-838c7926","path":"/solidity/ques1.html","title":"区块链技术赛项模拟题 - 智能合约部分（一）","lang":"zh-CN","frontmatter":{"title":"区块链技术赛项模拟题 - 智能合约部分（一）","cover":"/assets/images/cover3.jpg","icon":"fa-solid fa-dumbbell","date":"2024-03-07T00:00:00.000Z","description":"完整原题 使用Solidity语言完成智能合约开发、部署和调用，要求如下： 1.食品信息（FoodInfoItem）的接口编码 （1）编写食品信息实体的接口，完成可溯源食品信息初始化，实现可追溯的原始生产商食品信息上链功能； 表2-2-1 FoodInfoItem实体说明 名称 类型 说明 _currentTraceName string 当前用户名 _name string 食品名称 _owner address 合约的创建者 _quality uint8 质量 _status uint8 状态 _traceName string[] 用户名 _timestamp uint[] 流转时间戳 _traceAddress address[] 用户地址 _traceQuality uint8[] 食品质量 contract FoodInfoItem{ //①保存食品流转过程中各个阶段的时间戳 //②保存食品流转过程各个阶段的用户名 //③保存食品流转过程各个阶段的用户地址信息（和用户一一对应） //④保存食品流转过程中各个阶段的质量 //⑤食品名称 //⑥当前用户名称 //⑦质量（0=优质 1=合格 2=不合格） //⑧状态（0:生产 1:分销 2:出售） //⑨初始化owner （2）编写分销商食品上链信息接口，根据食品溯源智能合约地址获取分销商上链食品的信息； function addTraceInfoByDistributor(①, uint8 quality) public returns(bool) { require(_status == 0 , \\"status must be producing\\"); //② _timestamp.push(now); _traceName.push(traceName); _currentTraceName = traceName; //③ //④ _traceQuality.push(_quality); _status = 1; return true; } （3）编写超市进行食品上链信息的接口，根据食品溯源智能合约地址获取超市上链食品信息。 function addTraceInfoByRetailer(①, uint8 quality) public returns(bool) { require(_status == 1 , \\"status must be distributing\\"); //② _timestamp.push(now); _traceName.push(traceName); _currentTraceName = traceName; //③ //④ _traceQuality.push(_quality); _status = 2; return true; } 2.食品溯源(Trace)的接口编码 （1）编写食品溯源智能合约生产商Producer添加食品接口，必须生产商才能添加可溯源的食品，实现溯源功能； function newFood(①, string traceName, uint8 quality) \\tpublic ② returns(③) { //④ //⑤ //⑥ //⑦ //⑧ } （2）编写食品溯源智能合约分销商Distributor添加食品接口，必须分销商才能添加可溯源的食品，实现溯源功能； function addTraceInfoByDistributor(①, uint8 quality) \\tpublic ② returns(bool) { //③ return FoodInfoItem(foods[traceNumber]).④, quality); } （3）编写食品溯源智能合约超市Retailer添加食品接口，必须超市才能添加可溯源的食品，实现溯源功能。 function addTraceInfoByRetailer(①, uint8 quality) \\tpublic ② returns(bool) { require(③, \\"traceNumber does not exist\\"); return FoodInfoItem(foods[traceNumber]).④, quality); } 3.角色（Role）管理的接口编码 （1）编写食品溯源增加角色接口，必须是未增加的角色才能被添加，实现添加角色的功能； function add(①, address account) ② { require(!③, \\"Roles: account already has role\\"); role.④ = true; } （2）编写食品溯源移除角色接口，必须是已增加的角色才能被移除，实现移除角色的功能； function remove(①, address account) ② { require(③, \\"Roles: account does not have role\\"); role.④ = false; } （3）编写食品溯源角色授权接口，必须是授权的角色地址，实现角色权限管理功能。 function has(①, address account) ② returns (bool) { require(③, \\"Roles: account is the zero address\\"); return role.④; } 4.合约编译、部署和调用 （1）解决代码错误和警告，正确编译并部署合约，成功获取部署的合约地址和abi； （2）调用食品溯源智能合约的接口，完整验证业务流程。","head":[["meta",{"property":"og:url","content":"https://kyokukong.github.io/solidity/ques1.html"}],["meta",{"property":"og:site_name","content":"Kyoku."}],["meta",{"property":"og:title","content":"区块链技术赛项模拟题 - 智能合约部分（一）"}],["meta",{"property":"og:description","content":"完整原题 使用Solidity语言完成智能合约开发、部署和调用，要求如下： 1.食品信息（FoodInfoItem）的接口编码 （1）编写食品信息实体的接口，完成可溯源食品信息初始化，实现可追溯的原始生产商食品信息上链功能； 表2-2-1 FoodInfoItem实体说明 名称 类型 说明 _currentTraceName string 当前用户名 _name string 食品名称 _owner address 合约的创建者 _quality uint8 质量 _status uint8 状态 _traceName string[] 用户名 _timestamp uint[] 流转时间戳 _traceAddress address[] 用户地址 _traceQuality uint8[] 食品质量 contract FoodInfoItem{ //①保存食品流转过程中各个阶段的时间戳 //②保存食品流转过程各个阶段的用户名 //③保存食品流转过程各个阶段的用户地址信息（和用户一一对应） //④保存食品流转过程中各个阶段的质量 //⑤食品名称 //⑥当前用户名称 //⑦质量（0=优质 1=合格 2=不合格） //⑧状态（0:生产 1:分销 2:出售） //⑨初始化owner （2）编写分销商食品上链信息接口，根据食品溯源智能合约地址获取分销商上链食品的信息； function addTraceInfoByDistributor(①, uint8 quality) public returns(bool) { require(_status == 0 , \\"status must be producing\\"); //② _timestamp.push(now); _traceName.push(traceName); _currentTraceName = traceName; //③ //④ _traceQuality.push(_quality); _status = 1; return true; } （3）编写超市进行食品上链信息的接口，根据食品溯源智能合约地址获取超市上链食品信息。 function addTraceInfoByRetailer(①, uint8 quality) public returns(bool) { require(_status == 1 , \\"status must be distributing\\"); //② _timestamp.push(now); _traceName.push(traceName); _currentTraceName = traceName; //③ //④ _traceQuality.push(_quality); _status = 2; return true; } 2.食品溯源(Trace)的接口编码 （1）编写食品溯源智能合约生产商Producer添加食品接口，必须生产商才能添加可溯源的食品，实现溯源功能； function newFood(①, string traceName, uint8 quality) \\tpublic ② returns(③) { //④ //⑤ //⑥ //⑦ //⑧ } （2）编写食品溯源智能合约分销商Distributor添加食品接口，必须分销商才能添加可溯源的食品，实现溯源功能； function addTraceInfoByDistributor(①, uint8 quality) \\tpublic ② returns(bool) { //③ return FoodInfoItem(foods[traceNumber]).④, quality); } （3）编写食品溯源智能合约超市Retailer添加食品接口，必须超市才能添加可溯源的食品，实现溯源功能。 function addTraceInfoByRetailer(①, uint8 quality) \\tpublic ② returns(bool) { require(③, \\"traceNumber does not exist\\"); return FoodInfoItem(foods[traceNumber]).④, quality); } 3.角色（Role）管理的接口编码 （1）编写食品溯源增加角色接口，必须是未增加的角色才能被添加，实现添加角色的功能； function add(①, address account) ② { require(!③, \\"Roles: account already has role\\"); role.④ = true; } （2）编写食品溯源移除角色接口，必须是已增加的角色才能被移除，实现移除角色的功能； function remove(①, address account) ② { require(③, \\"Roles: account does not have role\\"); role.④ = false; } （3）编写食品溯源角色授权接口，必须是授权的角色地址，实现角色权限管理功能。 function has(①, address account) ② returns (bool) { require(③, \\"Roles: account is the zero address\\"); return role.④; } 4.合约编译、部署和调用 （1）解决代码错误和警告，正确编译并部署合约，成功获取部署的合约地址和abi； （2）调用食品溯源智能合约的接口，完整验证业务流程。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://kyokukong.github.io/assets/images/cover3.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-11T07:53:20.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"区块链技术赛项模拟题 - 智能合约部分（一）"}],["meta",{"property":"article:author","content":"Kyoku_極"}],["meta",{"property":"article:published_time","content":"2024-03-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-11T07:53:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"区块链技术赛项模拟题 - 智能合约部分（一）\\",\\"image\\":[\\"https://kyokukong.github.io/assets/images/cover3.jpg\\"],\\"datePublished\\":\\"2024-03-07T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-11T07:53:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Kyoku_極\\",\\"url\\":\\"https://blog.kyoku.top\\"}]}"]]},"headers":[{"level":2,"title":"1.食品信息（FoodInfoItem）的接口编码","slug":"_1-食品信息-foodinfoitem-的接口编码","link":"#_1-食品信息-foodinfoitem-的接口编码","children":[{"level":3,"title":"题（1）","slug":"题-1","link":"#题-1","children":[]},{"level":3,"title":"题（2）","slug":"题-2","link":"#题-2","children":[]},{"level":3,"title":"题（3）","slug":"题-3","link":"#题-3","children":[]}]},{"level":2,"title":"3","slug":"_3","link":"#_3","children":[{"level":3,"title":"题（3）","slug":"题-3-1","link":"#题-3-1","children":[]}]}],"git":{"createdTime":1710143600000,"updatedTime":1710143600000,"contributors":[{"name":"KyokuKong","email":"144906395+KyokuKong@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":5.74,"words":1722},"filePathRelative":"solidity/ques1.md","localizedDate":"2024年3月7日","excerpt":"<details class=\\"hint-container details\\"><summary>完整原题</summary>\\n<p>使用Solidity语言完成智能合约开发、部署和调用，要求如下：\\n1.食品信息（FoodInfoItem）的接口编码\\n（1）编写食品信息实体的接口，完成可溯源食品信息初始化，实现可追溯的原始生产商食品信息上链功能；\\n表2-2-1 FoodInfoItem实体说明</p>\\n<table>\\n<thead>\\n<tr>\\n<th>名称</th>\\n<th>类型</th>\\n<th>说明</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>_currentTraceName</td>\\n<td>string</td>\\n<td>当前用户名</td>\\n</tr>\\n<tr>\\n<td>_name</td>\\n<td>string</td>\\n<td>食品名称</td>\\n</tr>\\n<tr>\\n<td>_owner</td>\\n<td>address</td>\\n<td>合约的创建者</td>\\n</tr>\\n<tr>\\n<td>_quality</td>\\n<td>uint8</td>\\n<td>质量</td>\\n</tr>\\n<tr>\\n<td>_status</td>\\n<td>uint8</td>\\n<td>状态</td>\\n</tr>\\n<tr>\\n<td>_traceName</td>\\n<td>string[]</td>\\n<td>用户名</td>\\n</tr>\\n<tr>\\n<td>_timestamp</td>\\n<td>uint[]</td>\\n<td>流转时间戳</td>\\n</tr>\\n<tr>\\n<td>_traceAddress</td>\\n<td>address[]</td>\\n<td>用户地址</td>\\n</tr>\\n<tr>\\n<td>_traceQuality</td>\\n<td>uint8[]</td>\\n<td>食品质量</td>\\n</tr>\\n</tbody>\\n</table>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">contract</span> <span class=\\"token class-name\\">FoodInfoItem</span><span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">//①保存食品流转过程中各个阶段的时间戳</span>\\n    <span class=\\"token comment\\">//②保存食品流转过程各个阶段的用户名</span>\\n    <span class=\\"token comment\\">//③保存食品流转过程各个阶段的用户地址信息（和用户一一对应）</span>\\n    <span class=\\"token comment\\">//④保存食品流转过程中各个阶段的质量</span>\\n    <span class=\\"token comment\\">//⑤食品名称</span>\\n    <span class=\\"token comment\\">//⑥当前用户名称</span>\\n    <span class=\\"token comment\\">//⑦质量（0=优质 1=合格 2=不合格）</span>\\n    <span class=\\"token comment\\">//⑧状态（0:生产 1:分销 2:出售）</span>\\n    <span class=\\"token comment\\">//⑨初始化owner</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（2）编写分销商食品上链信息接口，根据食品溯源智能合约地址获取分销商上链食品的信息；</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">addTraceInfoByDistributor</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">uint8</span> quality<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">returns</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">bool</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span>_status <span class=\\"token operator\\">==</span> <span class=\\"token number\\">0</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"status must be producing\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token comment\\">//②</span>\\n        _timestamp<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>now<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _traceName<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>traceName<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _currentTraceName <span class=\\"token operator\\">=</span> traceName<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token comment\\">//③</span>\\n        <span class=\\"token comment\\">//④</span>\\n        _traceQuality<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>_quality<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _status <span class=\\"token operator\\">=</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（3）编写超市进行食品上链信息的接口，根据食品溯源智能合约地址获取超市上链食品信息。</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">addTraceInfoByRetailer</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">uint8</span> quality<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">returns</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">bool</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span>_status <span class=\\"token operator\\">==</span> <span class=\\"token number\\">1</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"status must be distributing\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token comment\\">//②</span>\\n        _timestamp<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>now<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _traceName<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>traceName<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _currentTraceName <span class=\\"token operator\\">=</span> traceName<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token comment\\">//③</span>\\n        <span class=\\"token comment\\">//④</span>\\n        _traceQuality<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>_quality<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        _status <span class=\\"token operator\\">=</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>2.食品溯源(Trace)的接口编码\\n（1）编写食品溯源智能合约生产商Producer添加食品接口，必须生产商才能添加可溯源的食品，实现溯源功能；</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">newFood</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">string</span> traceName<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">uint8</span> quality<span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token keyword\\">public</span> ② <span class=\\"token keyword\\">returns</span><span class=\\"token punctuation\\">(</span>③<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token comment\\">//④</span>\\n            <span class=\\"token comment\\">//⑤</span>\\n            <span class=\\"token comment\\">//⑥</span>\\n            <span class=\\"token comment\\">//⑦</span>\\n            <span class=\\"token comment\\">//⑧</span>\\n        <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（2）编写食品溯源智能合约分销商Distributor添加食品接口，必须分销商才能添加可溯源的食品，实现溯源功能；</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">addTraceInfoByDistributor</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">uint8</span> quality<span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token keyword\\">public</span> ② <span class=\\"token keyword\\">returns</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">bool</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token comment\\">//③</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">FoodInfoItem</span><span class=\\"token punctuation\\">(</span>foods<span class=\\"token punctuation\\">[</span>traceNumber<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>④<span class=\\"token punctuation\\">,</span> quality<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（3）编写食品溯源智能合约超市Retailer添加食品接口，必须超市才能添加可溯源的食品，实现溯源功能。</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">addTraceInfoByRetailer</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">uint8</span> quality<span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token keyword\\">public</span> ② <span class=\\"token keyword\\">returns</span><span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">bool</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span>③<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"traceNumber does not exist\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token function\\">FoodInfoItem</span><span class=\\"token punctuation\\">(</span>foods<span class=\\"token punctuation\\">[</span>traceNumber<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>④<span class=\\"token punctuation\\">,</span> quality<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>3.角色（Role）管理的接口编码\\n（1）编写食品溯源增加角色接口，必须是未增加的角色才能被添加，实现添加角色的功能；</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">add</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">address</span> account<span class=\\"token punctuation\\">)</span> ② <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>③<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Roles: account already has role\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        role<span class=\\"token punctuation\\">.</span>④ <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（2）编写食品溯源移除角色接口，必须是已增加的角色才能被移除，实现移除角色的功能；</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">remove</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">address</span> account<span class=\\"token punctuation\\">)</span> ② <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span>③<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Roles: account does not have role\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        role<span class=\\"token punctuation\\">.</span>④ <span class=\\"token operator\\">=</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>（3）编写食品溯源角色授权接口，必须是授权的角色地址，实现角色权限管理功能。</p>\\n<div class=\\"language-solidity line-numbers-mode\\" data-ext=\\"solidity\\"><pre class=\\"language-solidity\\"><code><span class=\\"token keyword\\">function</span> <span class=\\"token function\\">has</span><span class=\\"token punctuation\\">(</span>①<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">address</span> account<span class=\\"token punctuation\\">)</span> ② <span class=\\"token keyword\\">returns</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">bool</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">require</span><span class=\\"token punctuation\\">(</span>③<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"Roles: account is the zero address\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">return</span> role<span class=\\"token punctuation\\">.</span>④<span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>4.合约编译、部署和调用\\n（1）解决代码错误和警告，正确编译并部署合约，成功获取部署的合约地址和abi；\\n（2）调用食品溯源智能合约的接口，完整验证业务流程。</p>\\n</details>","autoDesc":true}');export{n as data};
